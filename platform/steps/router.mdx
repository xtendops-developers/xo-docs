---
title: Router
description: Route workflow execution based on conditions
icon: "split"
---

The **Router** step routes workflow execution to different steps based on a variable value.

## Overview

The Router step enables conditional branching in SmartAgent workflows by routing to different next steps based on the value of a specified variable. It's useful for directing conversations to specialized handlers based on intent, customer tier, or other dynamic factors.

<div align="center">
  ![Router Step](/images/steps/router.png)
</div>

## Settings

### Next Step Variable

The variable that determines which route to take. The value of this variable must match one of the accepted next steps, otherwise it will route to the fallback step.

**Example:** If you set this to `intent`, the router will check the value of `{intent}` and route accordingly.

### Accepted Next Steps

List of valid step names that this router can route to. The value of the next step variable must match one of these step names.

**Example configuration:**
- Accepted next steps: `order_status`, `returns`, `billing`
- If `{intent}` = `order_status`, routes to the `order_status` step
- If `{intent}` = `returns`, routes to the `returns` step
- If `{intent}` = `billing`, routes to the `billing` step

### Fallback Step

The default step to route to if the next step variable doesn't match any of the accepted next steps. This ensures the workflow always has a path forward.

**Example:** Set to `general_support` to handle all unmatched cases.

## Advanced Options

### Follow Up Steps

Steps that run in parallel after the router completes. Use this for actions that don't need to block the workflow, such as logging or analytics.

### Background Steps

Steps that run in the background while the main workflow continues. Useful for long-running tasks that shouldn't delay the response.

## Common Use Cases

### Intent-Based Routing
Route to specialized handlers based on customer intent detected by a previous LLM step.

**Example workflow:**
1. LLM Step classifies customer intent and outputs to `{intent}` variable
2. Router checks `{intent}` value
3. Routes to appropriate handler (order_status, returns, billing, etc.)

### Customer Tier Routing
Direct premium customers to specialized support flows.

**Example:**
- Next step variable: `customer_tier`
- Accepted next steps: `premium_support`, `vip_support`
- Fallback step: `standard_support`

### Conditional Workflow Paths
Route based on business logic evaluated in a previous JavaScript Code step.

**Example:**
- Next step variable: `eligibility`
- Accepted next steps: `approved_flow`, `review_flow`
- Fallback step: `denied_flow`

## Related Pages

- [JavaScript Code](/platform/steps/javascript-code) - Calculate routing logic
- [LLM Step](/platform/steps/llm-step) - Classify intent for routing
- [Call SmartAgent](/platform/steps/call-smartagent) - Route to different SmartAgents
