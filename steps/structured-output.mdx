---
title: Structured Output
description: Convert data into controlled, structured formats
icon: "brackets-curly"
---

The **Structured Output** step uses AI to extract and transform unstructured data into well-defined, structured JSON formats.

## Overview

The Structured Output step analyzes text (like customer messages or documents) and extracts specific information into a predefined schema. This is useful for parsing customer requests, extracting entities, or converting free-form text into structured data that can be used in subsequent steps or API calls.

<div align="center">
  ![Structured Output Step](/steps/images/structured-output.png)
</div>

## Settings

### LLM and Model

Select the LLM provider and specific model for this step. Only providers that support structured output are available (OpenAI, Azure). Overrides the default LLM and model set in SmartAgent settings.

### User Prompt

The prompt that instructs the LLM on what information to extract and how to structure it. Include relevant context and variables.

**Example:**

```
Determine the next step in the conversation flow based on the chat history and current message.

Chat history: {chat_history}
Current message: {original_question}
Previous step: {conversation_last_step}

Select the appropriate next step.
```

### Schema Properties

Define the structure of the output JSON object. Each property specifies a field name and its data type.

**Available types:**

- **String** - Text values
- **Number** - Numeric values (integers or decimals)
- **Integer** - Whole numbers only
- **Boolean** - True/false values
- **Enum** - Predefined list of allowed values

**Example schema:**

```json
intent: { "type": "string" }
priority: { "type": "enum", "enum": ["low", "medium", "high"] }
item_count: { "type": "integer" }
```

The LLM will extract data matching this schema from the input text.

## Output

### Spread Result

When enabled, each schema property is saved as a separate variable in the background context instead of a single nested object.

**Example:**

- Disabled: Access via `{output.meeting_name}`
- Enabled: Access via `{meeting_name}`

### Outputs

Name of the variable where the structured output will be saved. Can be referenced in subsequent steps.

**Default:** `structured_output`

### Next Steps

The step(s) to execute after this step completes. Select from existing steps or enter a custom step name using variables.

## Advanced Options

### Follow Up Steps

Steps that run in parallel after this step completes. Use this for actions that don't need to block the workflow, such as logging or analytics.

### Background Steps

Steps that run in the background while the main workflow continues. Useful for long-running tasks that shouldn't delay the response.

### Write Outputs to BG Context

When enabled, saves the step output to the background context, making it available to all subsequent steps in the conversation without explicitly passing it.

### System Prompt

Advanced system-level instructions for the LLM. Generally not needed for standard use cases.

## Common Use Cases

### Extract Customer Intent and Details

Parse customer messages to identify what they want and relevant details.

**Schema:**

```json
intent: { "type": "string" }
order_number: { "type": "string" }
urgency: { "type": "string" }
```

### Parse Form Data

Convert free-text responses into structured fields.

**Schema:**

```json
full_name: { "type": "string" }
email: { "type": "string" }
phone: { "type": "string" }
preferred_contact_method: { "type": "string" }
```

### Determine Next Step for Router

Extract routing information to use with the Router step.

**Prompt:**

```
Based on the conversation context, determine the next step.

Chat history: {chat_history}
Current message: {original_question}

Choose the best next step based on where we are in the conversation.
```

**Schema:**

```json
next_step: { "type": "enum", "enum": ["greeting", "issue_identification", "issue_resolution", "closing"] }
reason: { "type": "string" }
```

**Use case:** Output the `next_step` value to a variable that the [Router step](/steps/router) uses to determine workflow path. The conversation flows from greeting → issue identification → issue resolution → closing.

### Classify and Tag Content

Categorize and tag customer inquiries or documents.

**Schema:**

```json
category: { "type": "string" }
priority: { "type": "string" }
tags: { "type": "array", "items": { "type": "string" } }
```

### Set Summary Section for Co-Pilot

Extract key conversation information and display it in the [Co-Pilot App](/smartAgentApp/coPilot) Summary Section for agents.

**Prompt:**

```
Your job is to extract key information from a conversation between a customer and a chatbot. Below is the conversation chat history and metadata to be parsed.

===========================
CHAT HISTORY TO SUMMARIZE
{chat_history}

===========================
CHAT METADATA TO EXTRACT
{participant_data}

===========================
From the above context, extract the following information:
- Brand, language, and reason for contact from metadata
- Customer's first name
- Key details shared during the conversation (email, order number, customer ID, address, order dates, etc.)
- Brief summary of the conversation
```

**Schema:**

```json
brand: { "type": "enum", "enum": ["Brand A", "Brand B", "Brand C"] }
language: { "type": "string" }
customer_first_name: { "type": "string" }
smartagent__conversation_summary: { "type": "string" }
reason_for_contact: { "type": "string" }
```

**Note:** The `smartagent__conversation_summary` field should contain a markdown-formatted summary. This will be displayed in the Co-Pilot Summary Section for agents.

[Learn more about the Co-Pilot Summary Section →](/smartAgentApp/coPilot#summary-section)

## Related Pages

- [LLM Step](/steps/llm-step) - Generate AI-driven responses
- [JavaScript Code](/steps/javascript-code) - Process structured data
- [REST API Call](/steps/rest-api-call) - Send structured data to external systems
