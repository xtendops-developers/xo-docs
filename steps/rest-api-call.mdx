---
title: REST API Call
description: Connect to external systems via HTTP
icon: "plug"
---

The **REST API Call** step connects to external systems using HTTP requests to fetch data, update records, or trigger actions.

## Overview

The REST API Call step enables SmartAgents to integrate with external systems like CRMs, e-commerce platforms, payment processors, and other services via standard HTTP methods (GET, POST, PUT, PATCH, DELETE).

<div align="center">
  ![REST API Call Step](/images/steps/rest-step.png)
</div>

## Settings

### URL

The API endpoint to call. Supports dynamic variables from previous steps.

**Example:**
```
https://api.example.com/v1/customers/{customer_id}
```

### Headers

HTTP headers to include with the request.

**Common headers:**
```
Content-Type: application/json
X-API-Key: {api_key}
X-Request-ID: {request_id}
```

**Authorization:**
For secure API authentication, add a `Secrets-Id` header that references credentials stored in the Secrets Manager (Settings > Integrations).

**Example:**
```
Secrets-Id: my-api-secret
```

[Learn more about the Secrets Manager â†’](/platform/settings#integrations)

### Method

HTTP method for the request.

**Options:**
- **GET** - Retrieve data
- **POST** - Create new records or trigger actions
- **PUT** - Replace entire resources
- **PATCH** - Partially update resources
- **DELETE** - Remove resources

### Body

Request payload for POST, PUT, and PATCH requests. Supports JSON format with dynamic variables.

**Example:**
```json
{
  "customer_id": "{customer.id}",
  "status": "resolved",
  "notes": "{agent_notes}"
}
```

### Inject Variable as Whole Body

When enabled, uses the value of a specified variable as the entire request body instead of constructing JSON from the Body field.

**Whole Body Key:** Name of the variable to inject (e.g., `request_data`).

**Use case:** When you've already constructed the full request body in a previous JavaScript Code or Structured Output step.

## Outputs

### Outputs

Name of the variable where the API response will be saved. Can be referenced in subsequent steps using `{variable_name}`.

**Default:** `api_response`

**Accessing response data:**
```javascript
{api_response.data.order_id}
{api_response.status}
{api_response.headers}
```

**Tip:** Use a [JavaScript Code step](/platform/steps/javascript-code) after the REST API Call to parse and extract specific information from the response.

### Next Steps

The step(s) to execute after the API call completes. Select from existing steps or enter a custom step name using variables.

## Advanced Settings

### Write Outputs to BG Context

When enabled, saves the API response to the background context, making it available to all subsequent steps in the conversation without explicitly passing it.

### Mock Response for Eval Runs

JSON response to return during evaluation runs (when conversation_id starts with 'evl_'). This allows you to test workflows without making real API calls.

**Example:**
```json
{
  "status": "success",
  "order_id": "12345",
  "message": "Order retrieved successfully"
}
```

### Follow Up Steps

Steps that run in parallel after this step completes. Use this for actions that don't need to block the workflow, such as logging or analytics.

### Background Steps

Steps that run in the background while the main workflow continues. Useful for long-running tasks that shouldn't delay the response.

## Common Use Cases

### Fetch Customer Data
Retrieve customer information from a CRM.

**Example:**
```
Method: GET
URL: https://api.crm.com/customers/{email}
Headers: Secrets-Id: crm-api-key
```

### Create Support Ticket
Create a new ticket in a support platform.

**Example:**
```
Method: POST
URL: https://api.zendesk.com/api/v2/tickets
Headers: Secrets-Id: zendesk-auth
Body: {
  "subject": "{issue_summary}",
  "description": "{full_description}",
  "priority": "{calculated_priority}"
}
```

### Update Order Status
Modify an order in an e-commerce system.

**Example:**
```
Method: PATCH
URL: https://api.shop.com/orders/{order_id}
Headers: Secrets-Id: shopify-key
Body: {
  "status": "cancelled",
  "cancellation_reason": "{reason}"
}
```

### Send Notification
Trigger a notification via an external service.

**Example:**
```
Method: POST
URL: https://api.notifications.com/send
Headers: Secrets-Id: notification-service
Body: {
  "user_id": "{customer.id}",
  "message": "{notification_text}",
  "channel": "email"
}
```

## Related Pages

- [Settings](/platform/settings) - Configure Secrets Manager
- [JavaScript Code](/platform/steps/javascript-code) - Transform API responses
- [Structured Output](/platform/steps/structured-output) - Format API request data
- [Router](/platform/steps/router) - Handle different response scenarios
